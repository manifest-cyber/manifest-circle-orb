description: >
  This command generate SBOM using Syft CLI
parameters:
  purl:
    type: string
    description: "purl to generate SBOM from"
  file:
    type: string
    description: "file path to write SBOM to"
steps:
  - run:
      shell: bash
      name: Generate SBOM
      command: |
        curl https://gist.githubusercontent.com/manifestori/4a6c62617e05fb054a1410a16ea2b29b/raw/cbcfe2fe0422d13e9b46111534a1852cd504fc4d/syft.yaml > syft.yaml

        tmp=<<parameters.file>>
        filename=${tmp:-cdx.json} \
        ./bin/syft -v <<parameters.purl>> --config=syft.yaml --file="$filename"

        ls
